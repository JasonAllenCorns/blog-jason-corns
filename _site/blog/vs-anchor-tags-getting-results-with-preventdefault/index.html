<!doctype html>
<!--[if lt IE 7]><html class="no-js lt-ie9 lt-ie8 lt-ie7" lang="en"> <![endif]-->
<!--[if (IE 7)&!(IEMobile)]><html class="no-js lt-ie9 lt-ie8" lang="en"><![endif]-->
<!--[if (IE 8)&!(IEMobile)]><html class="no-js lt-ie9" lang="en"><![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en"><!--<![endif]-->
<head>
<meta charset="utf-8">
<title>Jason vs. Anchor Tags – Getting Results with the preventDefault method &#8211; A few words from an avid HTMLer</title>
<meta name="description" content="Wandering the world of code design and application architecture, absorbing all the Creative opportunities in this wonderful industry of ours.
">
<meta name="keywords" content="AJAX, JAVASCRIPT, JQUERY, MODAL, PREVENT-DEFAULT">

<!-- Twitter Cards -->
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="/images/">
<meta name="twitter:title" content="Jason vs. Anchor Tags – Getting Results with the preventDefault method">
<meta name="twitter:description" content="Wandering the world of code design and application architecture, absorbing all the Creative opportunities in this wonderful industry of ours.
">
<meta name="twitter:creator" content="@jasoncorns">

<!-- Open Graph -->
<meta property="og:locale" content="en_US">
<meta property="og:type" content="article">
<meta property="og:title" content="Jason vs. Anchor Tags – Getting Results with the preventDefault method">
<meta property="og:description" content="Wandering the world of code design and application architecture, absorbing all the Creative opportunities in this wonderful industry of ours.
">
<meta property="og:url" content="/blog/vs-anchor-tags-getting-results-with-preventdefault/">
<meta property="og:site_name" content="A few words from an avid HTMLer">





<link rel="canonical" href="/blog/vs-anchor-tags-getting-results-with-preventdefault/">
<link href="/feed.xml" type="application/atom+xml" rel="alternate" title="A few words from an avid HTMLer Feed">

<!-- http://t.co/dKP3o1e -->
<meta name="HandheldFriendly" content="True">
<meta name="MobileOptimized" content="320">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<!-- For all browsers -->
<link rel="stylesheet" href="/assets/css/main.css">
<!-- Webfonts -->

<meta http-equiv="cleartype" content="on">

<!-- Load Modernizr -->
<script src="/assets/js/vendor/modernizr-2.6.2.custom.min.js"></script>

<!-- Icons -->
<!-- 16x16 -->
<link rel="shortcut icon" href="/favicon.ico">
<!-- 32x32 -->
<link rel="shortcut icon" href="/favicon.ico">
<!-- 57x57 (precomposed) for iPhone 3GS, pre-2011 iPod Touch and older Android devices -->
<link rel="apple-touch-icon-precomposed" href="/images/apple-touch-icon-precomposed.png">
<!-- 72x72 (precomposed) for 1st generation iPad, iPad 2 and iPad mini -->
<link rel="apple-touch-icon-precomposed" sizes="72x72" href="/images/apple-touch-icon-72x72-precomposed.png">
<!-- 114x114 (precomposed) for iPhone 4, 4S, 5 and post-2011 iPod Touch -->
<link rel="apple-touch-icon-precomposed" sizes="114x114" href="/images/apple-touch-icon-114x114-precomposed.png">
<!-- 144x144 (precomposed) for iPad 3rd and 4th generation -->
<link rel="apple-touch-icon-precomposed" sizes="144x144" href="/images/apple-touch-icon-144x144-precomposed.png">



</head>

<body id="post" >

<!--[if lt IE 9]><div class="upgrade"><strong><a href="http://whatbrowser.org/">Your browser is quite old!</strong> Why not upgrade to a different browser to better enjoy this site?</a></div><![endif]-->
<nav id="dl-menu" class="dl-menuwrapper" role="navigation">
	<button class="dl-trigger">Open Menu</button>
	<ul class="dl-menu">
		<li><a href="/">Home</a></li>
		<li>
			<a href="#">About</a>
			<ul class="dl-submenu">
				<li>
					<img src="/images/1789_10151376948874753_1728718603_n.jpg" alt="Jason Corns photo" class="author-photo">
					<h4>Jason Corns</h4>
					<p>I'm a father, husband, Lego builder, golfer, BBQ enthusiast, Chili lover and legal US Citizen.</p>
				</li>
				<li><a href="/about/"><span class="btn btn-inverse">Learn More</span></a></li>
				
				<li>
					<a href="https://twitter.com/jasoncorns"><i class="fa fa-fw fa-twitter"></i> Twitter</a>
				</li>
				
				
				
				<li>
					<a href="https://github.com/JasonAllenCorns"><i class="fa fa-fw fa-github"></i> GitHub</a>
				</li>
				
				
				
				
			</ul><!-- /.dl-submenu -->
		</li>
		<li>
			<a href="#">Posts</a>
			<ul class="dl-submenu">
				<li><a href="/posts/">All Posts</a></li>
				<li><a href="/tags/">All Tags</a></li>
			</ul>
		</li>
		
	    
	    <li><a href="/theme-setup/" >Theme Setup</a></li>
	  
	    
	    <li><a href="http://mademistakes.com" target="_blank">External Link</a></li>
	  
	</ul><!-- /.dl-menu -->
</nav><!-- /.dl-menuwrapper -->




<div id="main" role="main">
  <article class="hentry">
    <header class="header-title">
      <div class="header-title-wrap">
        
          <h1 class="entry-title"><a href="/blog/vs-anchor-tags-getting-results-with-preventdefault/" rel="bookmark" title="Jason vs. Anchor Tags – Getting Results with the preventDefault method">Jason vs. Anchor Tags – Getting Results with the preventDefault method</a></h1>
        
        <h2><span class="entry-date date published"><time datetime="2010-05-13T19:22:49-07:00">May 13, 2010</time></span></h2>
        
        <p class="entry-reading-time">
          <i class="fa fa-clock-o"></i>
          
Reading time ~5 minutes
        </p><!-- /.entry-reading-time -->
        
      </div><!-- /.header-title-wrap -->
    </header>
    <div class="entry-content">
      <p>In another post, <a href="/blog/accessibility/vs-page-weight-accessibility-part-2/">Jason vs. Page Weight – Accessibility Series, pt. 2</a>, I talked about a solving page weight problem I had with a client.<!--more-->  In the end, the client decided to put a lot of data on a single page.  In my opinion, this would have been a great time to use AJAX to pull in the data rather than just pushing it all to the page at load.  The problem with AJAX is that it relies on JavaScript (reliance may, in fact, be too weak a term, honestly) and so would not have been ideal for search engines and would not have provided accessible page content.  We could fix that by linking to pages with additional content, but we really want to use AJAX to show the data on a single page for all visitors with JavaScript enabled.  So, we just do both.</p>

<p>By leveraging the <a href="http://api.jquery.com/category/events/event-object/#post-201">preventDefault method</a> available in the jQuery library (this is actually a JavaScript call, and exists outside of jQuery.  See the <a href="http://www.w3.org/TR/2001/WD-DOM-Level-3-Events-20010823/events.html#Events-Event-preventDefault">W3C write up</a>.) we can provide a page that is static, accessible HTML content by default, but picks up some dynamic interest at page load.  Note: some of the following examples presuppose a single domain; using AJAX to load content from other pages can easily get into <a href="http://en.wikipedia.org/wiki/Cross-site_scripting">cross-site scripting</a> issues.  If you control the server being accessed, you can manage the cross-origin request permissions by setting the <a href="https://developer.mozilla.org/en-US/docs/Web/HTTP/Access_control_CORS">HTTP access control</a>.</p>

<p>Take the following HTML code for example:</p>

<figure class="highlight"><pre><code class="language-html" data-lang="html"><span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"targetLinks"</span><span class="nt">&gt;</span>
	<span class="nt">&lt;ul&gt;</span>
		<span class="nt">&lt;li&gt;&lt;a</span> <span class="na">href=</span><span class="s">"somepage.html"</span><span class="nt">&gt;</span>Some Page<span class="nt">&lt;/a&gt;&lt;/li&gt;</span>
		<span class="nt">&lt;li&gt;&lt;a</span> <span class="na">href=</span><span class="s">"anotherpage.html"</span><span class="nt">&gt;</span>Another Page<span class="nt">&lt;/a&gt;&lt;/li&gt;</span>
	<span class="nt">&lt;/ul&gt;</span>
<span class="nt">&lt;/div&gt;</span></code></pre></figure>

<p>No magic here.  Two links to two different pages (for simplicity, these are two pages within the same domain).</p>

<h2 id="the-task">The Task</h2>

<p>Our task is to display content from a different page in a modal dialog.  Just to make it more fun, we’ll pull a specific part of the target page in our modal (denoted in each page by a div with ID of “target”).  To add that last little bit of shine to the action, we’ll prevent the URL from changing (more appropriately, we’ll stop any calls to change the <em>window location</em>).</p>

<p>We’ll need three things for this tutorial:</p>

<ul>
  <li><a href="http://jquery.com">jQuery</a></li>
  <li><a href="https://jqueryui.com/">jQueryUI</a> - <em>core</em> plus <em>dialog</em> will do (for a simple Modal)</li>
</ul>

<p>Let’s take a look at the code required to attain our goal, then we’ll break it down piece by piece.</p>

<figure class="highlight"><pre><code class="language-javascript" data-lang="javascript"><span class="nx">$</span><span class="p">(</span><span class="nb">document</span><span class="p">).</span><span class="nx">ready</span><span class="p">(</span><span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
	<span class="nx">$</span><span class="p">(</span><span class="s1">'.targetLinks'</span><span class="p">).</span><span class="nx">find</span><span class="p">(</span><span class="s1">'ul li a'</span><span class="p">).</span><span class="nx">on</span><span class="p">(</span><span class="s1">'click'</span><span class="p">,</span> <span class="kd">function</span><span class="p">(</span><span class="nx">eventMarker</span><span class="p">)</span> <span class="p">{</span>
		<span class="kd">var</span> <span class="nx">$dialog</span> <span class="o">=</span> <span class="nx">$</span><span class="p">(</span><span class="s1">'&lt;div&gt;&lt;/div&gt;'</span><span class="p">)</span>
			<span class="p">.</span><span class="nx">load</span><span class="p">(</span><span class="nx">$</span><span class="p">(</span><span class="k">this</span><span class="p">).</span><span class="nx">attr</span><span class="p">(</span><span class="s1">'href'</span><span class="p">)</span> <span class="o">+</span> <span class="s2">" #target"</span><span class="p">)</span>
			<span class="p">.</span><span class="nx">dialog</span><span class="p">({</span>
				<span class="na">autoOpen</span><span class="p">:</span> <span class="kc">false</span><span class="p">,</span>
				<span class="na">modal</span><span class="p">:</span><span class="kc">true</span><span class="p">,</span>
				<span class="na">title</span><span class="p">:</span> <span class="nx">$</span><span class="p">(</span><span class="k">this</span><span class="p">).</span><span class="nx">attr</span><span class="p">(</span><span class="s1">'title'</span><span class="p">),</span>
				<span class="na">width</span><span class="p">:</span> <span class="mi">500</span><span class="p">,</span>
				<span class="na">height</span><span class="p">:</span> <span class="mi">300</span>
			<span class="p">});</span>
		<span class="nx">$dialog</span><span class="p">.</span><span class="nx">dialog</span><span class="p">(</span><span class="s1">'open'</span><span class="p">);</span>
		<span class="nx">eventMarker</span><span class="p">.</span><span class="nx">preventDefault</span><span class="p">();</span>
	<span class="p">});</span>
<span class="p">});</span></code></pre></figure>

<p>If you’ve seen jQuery snippets before, you should be familiar with the <em>$(document.ready)</em>, which executes the wrapped code only after the document has finished loading.</p>

<p><code class="highlighter-rouge">$('.targetLinks').find('ul li a').on('click', function(eventMarker) {</code></p>

<p>This line of code does two things:</p>

<ol>
  <li>Traverses the DOM to find the elements with class “targetLinks” that also contain the UL LI A descendant path and establishes a jQuery array of elements representing the matched <code class="highlighter-rouge">&lt;a&gt;</code> tags.</li>
  <li>Assigns a click event to each <code class="highlighter-rouge">&lt;a&gt;</code> in the returned array of elements.  The click event is an anonymous function that takes the DOM Event and assigns it to an argument called “eventMarker”.</li>
</ol>

<p><code class="highlighter-rouge">var $dialog = $('&lt;div&gt;&lt;/div&gt;')</code></p>

<p>Next, we establish a variable, <em>$dialog</em>, as a pointer to a newly created DIV element. Why a new div? The jQuery UI dialog, like many other jQuery plugins, destroy the element used as the selector when the dialog closes.  We could target an existing DIV as the dialog, but when the modal closes, the existing DIV will be destroyed (lost for all script).</p>

<p><code class="highlighter-rouge">.load($(this).attr('href') + " #target")</code></p>

<p>We continue the method chain, established on our newly created div, by calling the jQuery .load() method.  Load expects a URL (same site URI, of course), which we have passed by calling $(this) (the clicked anchor) and calling the .attr() method asking for the href.</p>

<p><code class="highlighter-rouge">.dialog({
	autoOpen: false,
	modal:true,
	title: $(this).attr('title'),
	width: 500,
	height: 300
});</code></p>

<p>Still continuing the method chain, we call the <a href="http://jqueryui.com/demos/dialog/">.dialog()</a> method on the <code class="highlighter-rouge">$dialog</code> variable (div that was created).  This established the UI Framework necessary to make the dialog work.  We set a few options to the dialog (see the <a href="http://jqueryui.com/dialog/#options">UI documentation for the dialog</a> for more options), again referencing <em>$(this)</em> (the clicked anchor) and calling the <a href="http://api.jquery.com/attr/">.attr()</a> method asking for the title of the anchor to set to the dialog title.</p>

<p><code class="highlighter-rouge">$dialog.dialog('open');</code></p>

<p>Here, we have separated the <em>open</em> command from the dialog instantiation.  This doesn’t need to be the case, here, but may prove to be a useful practice later.  If you were waiting to see your dialog, you should see it now.</p>

<p><code class="highlighter-rouge">eventMarker.preventDefault()</code></p>

<p>This is the moment we’ve been waiting for.  We have been following happily along wherever the DOM actions will take us but now, we are going to take control of the clicked anchor tag, and force it to do what we want.  Remember, <em>eventMarker</em> is the event argument passed in initially.  Here, we are calling the JavaScript preventDefault method on the event.  Since our event is the result of the click of an anchor, the default action should be to alter the window location.  Instead, we have truncated the event prior to changing the address bar.  As you might imagine, this same method can be used for bookmark links as well – in the end, the preventDefault() method will prevent the hash from being appended to the URL.</p>

<h3 id="why-preventdefault-instead-of-return-false">Why <em>preventDefault()</em> instead of return false;?</h3>

<p>Whenever  you run a return from a JavaScript function, you exit the function – completely preempting any further actions.  With <em>preventDefault()</em>, further processing can be accomplished after the method call, within the same function.  Note that <em>eventMarker.stopPropogation()</em> or <em>eventMarker.cancelBubble=true</em> should be used to completely cancel event bubbling.</p>

<h3 id="so-what">So what?</h3>

<p>Why would the methods in this post be useful?  With this code,  we are unobtrusively adding click event handlers to targeted links, but we are doing so without actually coding “onclick=’…’” or setting href=”javascript:function()”.  If your visitors have <a href="http://www.webdesignerdepot.com/2010/02/how-to-plan-for-the-absence-of-javascript/">JavaScript disabled</a>, then they will get the benefit of linked content.  If JavaScript is enabled, they will get the benefit of dynamic content display, without leaving the page.  <em>Win-win</em>.</p>

      <footer class="entry-meta">
        <span class="entry-tags"><a href="/tags/#AJAX" title="Pages tagged AJAX" class="tag"><span class="term">AJAX</span></a><a href="/tags/#JAVASCRIPT" title="Pages tagged JAVASCRIPT" class="tag"><span class="term">JAVASCRIPT</span></a><a href="/tags/#JQUERY" title="Pages tagged JQUERY" class="tag"><span class="term">JQUERY</span></a><a href="/tags/#MODAL" title="Pages tagged MODAL" class="tag"><span class="term">MODAL</span></a><a href="/tags/#PREVENT-DEFAULT" title="Pages tagged PREVENT-DEFAULT" class="tag"><span class="term">PREVENT-DEFAULT</span></a></span>
        
        <div class="social-share">
  <ul class="socialcount socialcount-small inline-list">
    <li class="facebook"><a href="https://www.facebook.com/sharer/sharer.php?u=/blog/vs-anchor-tags-getting-results-with-preventdefault/" title="Share on Facebook"><span class="count"><i class="fa fa-facebook-square"></i> Like</span></a></li>
    <li class="twitter"><a href="https://twitter.com/intent/tweet?text=/blog/vs-anchor-tags-getting-results-with-preventdefault/" title="Share on Twitter"><span class="count"><i class="fa fa-twitter-square"></i> Tweet</span></a></li>
    <li class="googleplus"><a href="https://plus.google.com/share?url=/blog/vs-anchor-tags-getting-results-with-preventdefault/" title="Share on Google Plus"><span class="count"><i class="fa fa-google-plus-square"></i> +1</span></a></li>
  </ul>
</div><!-- /.social-share -->
      </footer>
    </div><!-- /.entry-content -->
    
    <div class="read-more">
  
    <div class="read-more-header">
      <a href="/blog/accessibility/vs-page-weight-accessibility-part-2/" class="read-more-btn">Read More</a>
    </div><!-- /.read-more-header -->
    <div class="read-more-content">
      <h3><a href="/blog/how-to-write-apidoc-plugin/" title="How to: apiDoc plugin">How to: apiDoc plugin</a></h3>
      <p>Documentation is tedious.  It’s necessary, but tedious.  When recently tasked with creating a useful, wide-audience documentation site fo...&hellip; <a href="/blog/how-to-write-apidoc-plugin/">Continue reading</a></p>
    </div><!-- /.read-more-content -->
  
  <div class="read-more-list">
    
      <div class="list-item">
        <h4><a href="/blog/versus-css-triangle/" title="Jason vs. the CSS Triangle: Seeing My Own Shadow">Jason vs. the CSS Triangle: Seeing My Own Shadow</a></h4>
        <span>Published on March 28, 2013</span>
      </div><!-- /.list-item -->
    
      <div class="list-item">
        <h4><a href="/blog/jealousy-a-quick-look-at-the-Responsive-Redesign-of-the-Boston-Globe/" title="Jason vs. jealousy – a quick look at the Responsive Redesign of the Boston Globe">Jason vs. jealousy – a quick look at the Responsive Redesign of the Boston Globe</a></h4>
        <span>Published on September 15, 2011</span>
      </div><!-- /.list-item -->
    
  </div><!-- /.read-more-list -->
</div><!-- /.read-more -->
  </article>
</div><!-- /#main -->

<div class="footer-wrapper">
  <footer role="contentinfo">
    <span>&copy; 2016 Jason Corns. Powered by <a href="http://jekyllrb.com" rel="nofollow">Jekyll</a> using the <a href="https://mademistakes.com/work/hpstr-jekyll-theme/" rel="nofollow">HPSTR Theme</a>.</span>
  </footer>
</div><!-- /.footer-wrapper -->

<script src="//ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>
<script>window.jQuery || document.write('<script src="/assets/js/vendor/jquery-1.9.1.min.js"><\/script>')</script>
<script src="/assets/js/scripts.min.js"></script>



	        

</body>
</html>
